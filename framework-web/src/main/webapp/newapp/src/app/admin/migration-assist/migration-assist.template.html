<app-breadcrumb [breadcrumbData]="breadcrumbDataFrom"></app-breadcrumb>
<br>
<p-growl [(value)]="msgs"></p-growl>
<p-tabView (onChange)="onTabChange($event)">

    <p-tabPanel *ngFor="let tab of tabs" header="{{tab.caption}}" class="customTabview">

        <div class="portlet box green">
            <div class="portlet-title">
                <div class="caption">
                    <i class="icon-magnifier"></i>Search Criteria
                </div>
                <div class="tools">
                    <a title="Refresh" data-toggle="tooltip" data-placement="top" (click)="refershGrid()" data-original-title="" title="">
                        <i class="fa fa-refresh" aria-hidden="true" style="display: block;margin: 2px auto;color:white;"></i>
                    </a>
                    <a href="javascript:;" class="collapse" data-original-title="" title="" style="height:14px;"></a>
                </div>
            </div>
            <div class="portlet-body">
                <form class="form-horizontal">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="col-md-4 col-sm-6 col-xs-12 custpadding">
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-6">Name</label>
                                    <div class="col-md-9 col-sm-9 col-xs-6">
                                        <p-dropdown [options]="apps" [(ngModel)]="app" name="app" [style]="{'width':'100%','padding':'3px'}" [filter]="true" [disabled]="mode == 'false'">
                                        </p-dropdown>
                                        <!-- <select title="Application"  class="form-control ng-pristine ng-valid ng-not-empty ng-touched" data-ng-model="searchForm.app" ng-options="r as r.name for r in apps" select2>
                                <option value="">-Select-</option>
                              </select> -->
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-5 col-sm-6 col-xs-12">
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Start Date</label>
                                    <div class="col-md-9 col-sm-9 col-xs-9">
                                        <p-calendar format="ddd MMM D HH:mm:ss YYYY z" [(ngModel)]="startDate" name="startDate" [showTime]="true" [utc]="true" [showIcon]="true"></p-calendar> -->
                                        <!-- <form #form="ngForm">
                                    <date-picker mode="datetime" format="ddd MMM D HH:mm:ss YYYY z" [(ngModel)]="startDate" name="startDate"></date-picker>
                                 </form>  -->
                                    </div>
                                </div>
                                <!-- <div class="form-group">
                          <label class="control-label col-md-3 col-sm-3 col-xs-12" style="padding-right:0px;text-align:left">Start Date</label>
                          <div class="col-md-9 col-sm-9 col-xs-9">
                            <a class="dropdown-toggle" id="start_date" role="button" data-toggle="dropdown" data-target="#"
                            href="#">
                            <div class="input-group date">
                           
                            <span class="form-control">{{searchForm.startdate | date :'EEE MMM dd HH:mm:ss yyyy'}}</span>
                            <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                            </div>
                            </a>
                            <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                            <datetimepicker
                            data-ng-model="searchForm.startdate"
                            data-datetimepicker-config="{ dropdownSelector: '#start_date', renderOn: 'end-date-changed',parseFormat:'EEE MMM dd HH:mm:ss yyyyZ'}"
                            data-on-set-time="startDateOnSetTime()"
                            data-before-render="startDateBeforeRender($dates)"></datetimepicker>
                            </ul>
                          </div>
                        </div> -->
                            </div>
                            <div class="col-md-3 col-sm-6 col-xs-12 custpadding">
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-6" style="padding-right:0px">Tags</label>
                                    <div class="col-md-9 col-sm-9 col-xs-6">
                                        <tag-input [(ngModel)]="tags" name="tags" theme='bootstrap' style=" max-height: 40px;overflow-x: hidden; border: 1px solid #ccc;overflow-y: scroll; border-radius: 5px;"></tag-input>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <div class="col-md-4 col-sm-6 col-xs-12 custpadding">
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-6" for="select">User</label>
                                    <div class="col-md-9 col-sm-9 col-xs-6">
                                        <p-dropdown [options]="allUserName" [(ngModel)]="username" name="username" [style]="{'width':'100%','padding':'3px'}" [filter]="true"
                                            [disabled]="mode == 'false'">
                                        </p-dropdown>
                                        <!-- <select class="form-control" select2 data-ng-model="searchForm.username" ng-options="r.name as r.name for r in allUSerName">
                                      <option value="">-Select-</option>
                                    </select > -->
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-5 col-sm-6 col-xs-12">
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">End Date</label>

                                    <div class="col-md-9 col-sm-9 col-xs-9">
                                        <p-calendar format="ddd MMM D HH:mm:ss YYYY z" [(ngModel)]="endDate" name="endDate" [showTime]="true" [showIcon]="true"></p-calendar>
                                        <!-- <form #form="ngForm">
                                        <date-picker mode="datetime" format="ddd MMM D HH:mm:ss YYYY" [(ngModel)]="endDate" name="endDate"></date-picker>
                                      </form> -->
                                    </div>
                                </div>

                            </div>
                            <div class="col-md-3 col-sm-6 col-xs-12 custpadding">

                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" style="padding-right:0px">Status</label>
                                    <div class="col-md-9 col-sm-6 col-xs-12">
                                        <p-dropdown [options]="allStatus" [(ngModel)]="status" name="status" [style]="{'width':'100%','padding':'3px'}" [filter]="true"
                                            [disabled]="mode == 'false'">
                                        </p-dropdown>
                                        <!-- <label class="btn btn-default" ng-model="searchForm.active" uib-btn-radio="'Y'" ng-disabled="{{mode}}" uncheckable>Yes</label>
                                      <label class="btn btn-default" ng-model="searchForm.active" uib-btn-radio="'N'" ng-disabled="{{mode}}" uncheckable>No</label> -->
                                        <!-- <select class="form-control" select2 data-ng-model="searchForm.active" ng-options="r.name as r.caption for r in allActive">                                    
                                   </select > -->
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 col-sm-6 col-xs-12 custpadding" *ngIf="moduleType=='jobs'||moduleType=='threads'">
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-6">Meta</label>
                                    <div class="col-md-9 col-sm-9 col-xs-6">
                                        <p-dropdown [options]="Alltypes" [(ngModel)]="type" name="type" [style]="{'width':'100%','padding':'3px'}" [filter]="true"
                                            [disabled]="mode == 'false'">
                                        </p-dropdown>
                                        <!-- <select title="Type"  class="form-control ng-pristine ng-valid ng-not-empty ng-touched" data-ng-model="searchForm.type" ng-options="r.name   as r.name for r in Alltypes" select2>
                                      <option value="">-Select-</option>
                                    </select> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <div class="col-md-4 col-sm-6 col-xs-12 custpadding">
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-6"></label>
                                    <div class="col-md-9 col-sm-9 col-xs-6">
                                        <input type="submit" class="btn btn-success" value="Search" name="submit" (click)="searchCriteria()">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--<span style="float:right;padding-right: 3%;color: blue;"><i>Timezone is {{currentTimezone}}</i></span>-->
                </form>
            </div>
        </div>


        <div class="portlet box green">
            <div class="portlet-title">
                <div class="caption">
                    <i class="fa fa-cogs"></i>
                    <span [innerHTML]="gridTitle"></span>
                </div>
                <div class="actions">
                    <a (click)="add()" class="btn btn-default btn-sm">
                        <i class="fa fa-plus"></i> Add 
                    </a>
                    <!-- <div class="btn-group" dropdown style="text-align:center" >
              <button dropdownToggle type="button" class="btn btn-default btn-sm dropdown-toggle">
              Export <span class="caret"></span>
              </button>
              <ul *dropdownMenu class="dropdown-menu" role="menu">
              <li><a (click)="dt.exportCSV()"> Export All (.csv) </a></li>
              <li><a (click)="dt.exportCSV({selectionOnly:true})"> Export Selected (.csv)</a></li>
            </ul>
          </div> -->
                </div>
                <!--  <div class="tools">
          <a title="Refresh" data-toggle="tooltip" data-placement="top" tooltip (click)="refreshSearchResults()">
            <i class="fa fa-refresh" aria-hidden="true" style="display:block;margin: 2px auto;color:white;">
            </i>
          </a>
          <a href="javascript:;" class="collapse aSize" style="height:14px;">
          </a> 
          </div>-->
            </div>
            <div class="portlet-body">
                <div class="row">
                    <div class="col-md-12 col-sm-12">
                        <div class="col-md-3 col-md-offset-9" style="padding:4px 5px;border-bottom: 0 none">
                            <i class="fa fa-search" style="margin-left: 12%; margin-top: 2%;"></i>
                            <input #gb type="text" style="float:right;" pInputText placeholder="Search">
                        </div>
                    </div>
                </div>
                <br>
                <div class="row">
                    <div class="col-md-12" *ngIf="rowData1">
                        <p-dataTable #dt [value]="rowData1" exportFilename="data" [(selection)]="selectedData" selectionMode="multiple" [metaKeySelection]="false"
                            scrollable="true" resizableColumns="true" scrollHeight="440px" [globalFilter]="gb" sortMode="multiple"
                            [paginator]="true" [rows]="10" [pageLinks]="3" [rowsPerPageOptions]="[5,10,20]">
                            <p-column *ngFor="let col of cols" [field]="col.field" [header]="col.header"></p-column>
                            <!-- <p-column field="name" header="Name" [sortable]="true"></p-column>
                      <p-column field="version" header="Version" [sortable]="true"></p-column>
                      <p-column field="createdBy.ref.name" header="Created By" [sortable]="true"></p-column>
                      <p-column field="createdOn" header="Created On" [sortable]="true"></p-column>
                      <p-column field="active" [hidden]="isExec=='true'" header="Active" [sortable]="true" [style]="{'text-align':'center'}">
                        <ng-template let-colactive let-active="rowData" pTemplate="body">
                          {{formatActive(active[colactive.field])}}
                        </ng-template>
                      </p-column>
                      <p-column field="status.stage" [hidden]="isExec=='false'"   header="Status" [sortable]="true" [style]="{'text-align':'center'}">
                        <ng-template let-colstatus let-statused="rowData" pTemplate="body">                            
                          <div class="label-sm label-success" *ngIf="statused.status!=null" [ngStyle]="{'width':'88%','font-size':'13px','padding':'2px','color':'white','margin': '0 auto','font-weight':'300','background-color':statused.status.color}">{{statused.status.stage}}</div>
                        </ng-template>
                      </p-column>
        
                      <p-column field="published" [hidden]="isExec=='true'" header="Published" [sortable]="true" [style]="{'text-align':'center'}">
                        <ng-template let-colpublished let-published="rowData" pTemplate="body">
                          {{formatPublish(published[colpublished.field])}}
                          
                        </ng-template>
                      </p-column> -->

                            <!-- <p-column  header="Action">
                        <ng-template let-col let-car="rowData" pTemplate="body">{{car | json }}  
                            <p-menu #menu popup="popup" [model]="items" appendTo="body"></p-menu>
                            <div style="text-align: center;">
                            <button type="button" pButton label="Action" icon="fa fa-angle-down" iconPos="right" (click)="menu.toggle($event);onClickMenu(car);"></button>  
                          {{car.uuid}}
                          </div>   {{car | json }}                   
                          </ng-template>
                    </p-column>     -->

                            <p-column header="Action" *ngIf="moduleType == 'export'">
                                <ng-template let-col let-car="rowData" pTemplate="body">
                                    <p-menu #menu popup="popup" [model]="itemsExport" appendTo="body"></p-menu>
                                    <div style="text-align: center;">
                                        <button type="button" pButton label="Action" icon="fa fa-angle-down" iconPos="right" (click)="menu.toggle($event);onClickMenu(car);"></button>
                                    </div>
                                </ng-template>
                            </p-column>

                            <p-column header="Action" *ngIf="moduleType == 'import'">
                                <ng-template let-col let-car="rowData" pTemplate="body">
                                    <p-menu #menu popup="popup" [model]="itemsImport" appendTo="body"></p-menu>
                                    <div style="text-align: center;">
                                        <button type="button" pButton label="Action" icon="fa fa-angle-down" iconPos="right" (click)="menu.toggle($event);onClickMenu(car);"></button>
                                    </div>
                                </ng-template>
                            </p-column>
                        </p-dataTable>
                    </div>
                </div>
            </div>
        </div>

    </p-tabPanel>
</p-tabView>