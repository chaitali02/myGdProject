  <style>
    .select2-container--open {
      z-index: 10060;
    }
  </style>
  <!-- BEGIN PAGE HEADER-->
  <div class="jitu" ng-controller="ShowDashboradController2">
    <div class="page-bar">
      <ul class="page-breadcrumb">
        <li>
          <a ui-sref="home">Home</a>
          <i class="fa fa-circle"></i>
        </li>
        <li>
          <span>{{$state.current.data.pageTitle}}</span>
          <i class="fa fa-circle"></i>
        </li>
        <li>
          <a ui-sref="dashboard">Dashboard</a>
          <i class="fa fa-circle"></i>
        </li>
        <li>
          <a ui-sref="blank">{{dashboarddata.name | strReplace:'_':' '|capitalize}}</a>
        </li>
      </ul>
      <div class="page-toolbar">
        <div id="dashboard-report-range" class="pull-right tooltips btn btn-sm" data-container="body" data-placement="bottom" data-original-title="Change dashboard date range">
          <i class="icon-calendar"></i>&nbsp;
          <span class="thin uppercase hidden-xs">{{time +' '+tzName}}</span>&nbsp;
        </div>
      </div>
    </div><!-- END PAGE HEADER-->
    <br>
    <!--  <div notifybar style="position:fixed;top:40px;right:0;z-index:1000"></div> -->

    <!-- BEGIN MAIN CONTENT -->
    <div class="row" ng-if="!IsVizpodDetailShow">
      <div class="col-lg-12 col-xs-12 col-sm-12">
        <div class="portlet light bordered fullscreendashobard">
          <div class="portlet-title">
            <div class="caption">
              <i class=" icon-layers "></i>
              <span class="caption-subject bold">{{dashboarddata.name | strReplace:'_':' '|capitalize}}</span>
            </div>
            <div class="actions">
              
              <a class="btn btn-circle btn-icon-only btn-default" ui-sref="metaListdashboard({'id':dashboarddata.uuid,'mode':'false'})" tooltip-placement="{{showtooltip}}" uib-tooltip="Edit" ng-show="hideIcon">
                <i class="fa fa-edit " style="display:block;margin:2px 0px 0px 1px;"></i>    <!-- bg-yellow bg-hover-grey-salsa font-white fa-icon fa-edit
                 bg-blue bg-hover-grey-salsa font-white 
                bg-green bg-hover-grey-salsa font-white -->
              </a>
              <a class="btn btn-circle btn-icon-only btn-default fullscreen  " tooltip-placement="{{showtooltip}}" uib-tooltip="{{showtooltiptitle}}" ng-click="fullscreen()"></a>
              <a class="btn btn-circle btn-icon-only btn-default " href="javascript:;" tooltip-placement="{{showtooltip}}" uib-tooltip="Knowledge Graph" data-ng-click="showDashboardGraph(dashboarddata.dashboarddata.uuid,dashboarddata.dashboarddata.version)"data-ng-show="showdashboard">   <!--style="border: 0px solid transparent !important;"-->
                <i class="fa fa-sitemap" style="display: block;margin:2px auto;color:#a0a0a0;"></i>
              </a>
              <a class="btn btn-circle btn-icon-only btn-default" href="javascript:;" tooltip-placement="{{showtooltip}}" uib-tooltip="Show Details" data-ng-show="!showdashboard" data-ng-click="showDashboardPage()" >
                <i class="fa fa-file" style="display: block;margin: 2px auto;color:#a0a0a0;"></i>
              </a>
              <a href="javascript:;" class="reload btn btn-circle btn-icon-only btn-default   " ng-click="showdashboard==true?callGraph():broadcastRefreshData()" data-original-title="">
                <i class="fa fa-refresh" aria-hidden="true" style="display: block;margin: 2px auto;color:#a0a0a0;"></i> 
              </a>
              <a class="btn btn-circle btn-icon-only btn-default" ui-sref="dashboard" tooltip-placement="{{showtooltip}}" uib-tooltip="Close" ng-show="hideIcon">
                <i class="fa fa-times" style="display: block;margin:2px auto;color:#a0a0a0;"></i>
              </a>
            </div>
          </div><!--End portlet-title-->
          <div class="portlet-body" style="margin-bottom:-15px;">
            <div class="form-body graph-body" ng-if="showgraphdiv">
              <div class="form-body text-center" id="errorMsg" style="color:blue;"></div>
                <div class="spinner" id="graphloader">
                  <div class="bounce1"></div>
                  <div class="bounce2"></div>
                  <div class="bounce3"></div>
                </div>
              <div class="form-body show-graph-body" tree-graph-directive  uuid="uuid" version="version">
              </div>
            </div><!--End D3 Graph-->

            <div class="row" data-ng-show="showdashboard">
              <div class="col-lg-12 col-xs-12 col-sm-12">
                <div class="portlet box green" style="border:1px solid #e7ecf1!important">
                  <div class="portlet-title">
                    <div class="caption">Filter
                    </div>
                    <div class="tools">
                      <a uib-tooltip="Refresh" tooltip-placement="{{showtooltip}}" href="javascript:;" ng-click="refreshDashboard(filterAttribureIdValues.length)" style="height:14px;" ng-click="refreshDashboard(filterAttribureIdValues.length)">
                        <i class="fa fa-refresh" aria-hidden="true" style="display: block;margin: 2px auto;color:white;"></i>
                      </a>
                      <a href="javascript:;" class="collapse" data-original-title="" title="" style="height:14px;"></a>
                    </div>
                  </div>
                  <div class="portlet-body">
                    <div class="row" style="margin-top: 15px;">
                      <div  class="col-lg-4 col-xs-12 col-sm-12" ng-repeat="data in filterAttribureIdValues" style="margin-bottom:25px;">
                        <label><b>{{data.dname}}</b></label>
                        <!-- <select ng-disabled="inprogressdata" title="{{dname}}" class="form-control" select2 ng-model="selectedAttributeValue[$index]" ng-change="onFilterChange($index)" ng-options="c as c.value for c in data.values" track by c.id>
                          </select> -->
                          <select ng-disabled="inprogressdata" title="{{dname}}" class="form-control" select2 ng-model="selectedAttributeValue[$index]" ng-change="onChange()" ng-options="c as c.value for c in data.values" track by c.id>
                          </select>   
                      </div>
                    </div>

                    <div class="row" style="margin-top: 15px;" ng-if="filterAttribureIdValues.length >0">
                        
                      <div  class="col-lg-12 col-xs-12 col-sm-12" style="margin-bottom:25px;">
                                              
                          <input type="button" class="btn btn-success  pull-right" value="Apply"   name="submit" ng-disabled="isApplyFilter|| inprogressdata " ng-click="onFilterChange()" style="margin-left:10px;">
                          <a ng-click="refreshDashboard(filterAttribureIdValues.length)"  class="btn btn-primary pull-right">Clear</a>
   
                        </div>
                      </div>
                  </div>
                </div><!--End portlet box green Filter-->
              </div>
              <!-- <div class=" col-lg-12 col-xs-12 col-sm-12 " ng-show="isUserNotification">
                <div ng-show="isDataError">
                  <h3 style="font-size:14px;color:red;">{{datamessage}}</h3>
                </div>
              </div> -->
              <!--Start C3 Graph Code-->
              <div ng-repeat="row in sectionRows">
                <div class="col-md-{{datacol.fullWidth?'12':(row.columns.length < 3 ? 12/(row.columns.length) : '4')}} {{datacol.vizpodDetails.class}}" ng-repeat="datacol in row.columns" ng-show="datacol.vizpodDetails.show" style="min-height:440px;">
                  <div class="portlet light bordered"  style="min-height:420px;">
                    <div class="portlet-title">
                      <div class="caption">
                        <span class="caption-subject font-dark bold ">{{datacol.name}}</span>
                      </div>
                      <div class="actions">
                        <a class="btn btn-circle btn-icon-only btn-default" ui-sref="dvvizpod({'id':datacol.vizpodDetails.uuid,'version':datacol.vizpodDetails.version,'mode':'false'})" tooltip-placement="{{showtooltip}}" uib-tooltip="Edit"
                          ng-show="hideIcon">  
                       <i class="fa fa-pencil-square-o" style="display: block;margin:2px 0px 0px 1px;"></i>
                       </a>
                       <a ng-click="downloadFile(datacol.vizpodDetails)" class="btn btn-circle btn-icon-only btn-default"  tooltip-placement="{{showtooltip}}" uib-tooltip="Download Data">  
                        <i class="fa fa-download" style="display: block;margin:2px 0px 0px 1px;"></i>
                       </a>
                       
                        <a class="btn btn-circle btn-icon-only btn-default" tooltip-placement="top" uib-tooltip="{{datacol.vizpodDetails.showtooltiptitle}}" ng-click="datacol.fullWidth =!datacol.fullWidth;fullScreenVizpod($parent.$index,$index)">
                          <i class="{{datacol.vizpodDetails.iconclass}}" aria-hidden="true"></i>
                        </a>
                      </div>
                    </div>
                    <div class="portlet-body">
                      <div>
                        <div class ="centercontent" style="min-height:300px" ng-show="datacol.isDataError">
                          <h3 style="font-size:14px;color:red;">{{datacol.errormsg}}</h3>
                        </div>
                        <div  class ="centercontent" style="min-height:300px" ng-if="datacol.vizpodDetails.datapoints !=null && datacol.vizpodDetails.datapoints.length == 0 && !datacol.isDataError" ng-show="!datacol.isInprogess">
                          <h3 style="font-size:14px;color:blue;">No data available</h3>
                        </div>
                        <div class="spinner centercontent" style="min-height:300px" ng-show="datacol.isInprogess">
                          <div class="bounce1"></div>
                          <div class="bounce2"></div>
                          <div class="bounce3"></div>
                        </div>
                        
                        <div ng-if="datacol.vizpodDetails.datapoints !=null && datacol.vizpodDetails.datapoints.length >0 && !inprogressdata  && datacol.vizpodDetails.type !='data-grid' && datacol.vizpodDetails.type !='bubble-chart' && datacol.vizpodDetails.type !='world-map' && datacol.vizpodDetails.type !='usa-map' && datacol.vizpodDetails.type !='bar-line-chart' && datacol.vizpodDetails.type !='network-graph' && datacol.vizpodDetails.type !='heat-map' && datacol.isDataError !=ture">
                          <c3chart chartGroup="chart" bindto-id="{{datacol.vizpodDetails.id}}" chart-data="datacol.vizpodDetails.datapoints" chart-columns="datacol.vizpodDetails.datacolumns" chart-x="datacol.vizpodDetails.datax" enable-zoom="true" callback-function="handleCallbackGroup">
                            <chart-bar ratio="0.5" />
                            <!--<chart-legend show-legend="true"/>
                            <chart-donut expand="true" width="30" show-label="false" title="Donut Title"/> -->
                            <chart-axes values-x="" >
                            <!-- <chart-size chart-height="33%" chart-width=""/> -->
                            <chart-axis>
                              <chart-axis-x axis-position="outer-center" axis-height="50px" axis-type="category" axis-label="{{datacol.vizpodDetails.datax.id}}">
                                <chart-axis-x-tick tick-rotate="10" tick-multiline="false" tick-culling-max="5"  />
                              </chart-axis-x>
                              <chart-axis-Y>
                                <chart-axis-y-tick tick-format-function="time_format"/>
                              </chart-axis-Y>

                            </chart-axis>
                            <!-- <chart- group-values="data 1,data 2"/> -->
                            <!--  <chart-legend show-legend="false" legend-position="right"/> -->
                            <chart-events on-contex-menu="showClick({vizpod:datacol,dataobj:data})"/>
                          </c3chart>
                        </div>
                        <div ng-if="datacol.vizpodDetails.datapoints !=null && datacol.vizpodDetails.datapoints.length >0 && !inprogressdata  && datacol.vizpodDetails.type =='bar-line-chart'  && datacol.isDataError !=ture">
                          
                          <c3chart chartGroup="chart" bindto-id="{{datacol.vizpodDetails.id}}" chart-data="datacol.vizpodDetails.datapoints" chart-columns="datacol.vizpodDetails.datacolumns" chart-x="datacol.vizpodDetails.datax" enable-zoom="true" callback-function="handleCallbackGroup">
                            <chart-bar ratio="0.5" />
                            <!--<chart-legend show-legend="true"/>
                            <chart-donut expand="true" width="30" show-label="false" title="Donut Title"/> -->
                            <chart-axes values-x="" y="{{datacol.vizpodDetails.columnNameY1}}" y2="{{datacol.vizpodDetails.columnNameY2}}">
                            <!-- <chart-size chart-height="33%" chart-width=""/> -->
                            <chart-axis>
                              <chart-axis-x axis-position="outer-center" axis-height="50px" axis-type="category" axis-label="{{datacol.vizpodDetails.datax.id}}">
                                <chart-axis-x-tick tick-rotate="10" tick-multiline="false" tick-culling-max="5"   />
                              </chart-axis-x>
                             
                              <chart-axis-Y axis-id="y" >
                                <chart-axis-y-tick id="y1" tick-format-function="time_format"/>
                                
                              </chart-axis-Y>
                              <chart-axis-Y axis-id="y2">
                                <chart-axis-y-tick id="y2" tick-format-function="time_format"/>
                              </chart-axis-Y>
                            </chart-axis>
                            
                             
                            
                           
                            <!-- <chart- group-values="data 1,data 2"/> -->
                            <!--  <chart-legend show-legend="false" legend-position="right"/> -->
                            <chart-events on-contex-menu="showClick({vizpod:datacol,dataobj:data})"/>
                          </c3chart>
                        </div>
                        <!-- chartEnd-->
                        <div ng-if="datacol.vizpodDetails.datapoints && datacol.vizpodDetails.datapoints.length >0 && !inprogressdata && datacol.vizpodDetails.type =='bubble-chart' && !IsVizpodDetailShow">
                          <div class="{{datacol.vizpodDetails.id}}" bubble-chart data="datacol.vizpodDetails.datapoints" column="datacol.vizpodInfo" chartid="datacol.vizpodDetails.id" on-right-click="selectData" objdetail="datacol">
                          </div>
                        </div>
                        <div ng-if="showmap && datacol.vizpodDetails.datapoints && datacol.vizpodDetails.datapoints.length >0 && !inprogressdata && datacol.vizpodDetails.type =='world-map'" >
                          <div id="{{datacol.vizpodDetails.id}}" world-map data="datacol.vizpodDetails.datapoints" column="datacol.vizpodInfo" chartid="datacol.vizpodDetails.id" style="position:relative;width:100%;height:320px;" on-right-click="selectData" objdetail="datacol">
                          </div>
                        </div>
                        <div ng-if="showmap && datacol.vizpodDetails.datapoints && datacol.vizpodDetails.datapoints.length >0 && !inprogressdata && datacol.vizpodDetails.type =='usa-map'" >
                          <div id="{{datacol.vizpodDetails.id}}" world-map data="datacol.vizpodDetails.datapoints" column="datacol.vizpodInfo" chartid="datacol.vizpodDetails.id" style="position:relative;width:100%;height:320px;" on-right-click="selectData" objdetail="datacol">
                          </div>
                        </div>
                        <div ng-if="datacol.vizpodDetails.type =='data-grid' && datacol.vizpodDetails.datapoints !=null && datacol.vizpodDetails.datapoints.length >0 && !inprogressdata">

                          <div ui-grid="datacol.gridOptions" class="grid" ui-grid-resize-columns ui-grid-auto-resize ui-grid-exporter ng-style="getGridStyle(datacol.filteredRows)">
                            <div class="nodatawatermark_results" ng-show="!datacol.gridOptions.data.length">No data available</div>
                          </div>
                        </div>
                        <div ng-if="datacol.vizpodDetails.type == 'network-graph'  && !inprogressdata">
                             <h1>Network Graph</h1>
                        </div>
                        <div  ng-if="datacol.vizpodDetails.type == 'heat-map'  && !inprogressdata && datacol.vizpodDetails.datapoints !=null && datacol.vizpodDetails.datapoints.length >0">
                          <div class="{{datacol.vizpodDetails.id}}" heat-map data="datacol.vizpodDetails.datapoints" column="datacol.vizpodInfo" chartid="datacol.vizpodDetails.id"  objdetail="datacol">
                          </div>
                     </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div><!--End C3 Graph Code-->
            </div>
          </div>
        </div>
      </div>
    </div><!-- END MAIN CONTENT -->
    
    <div class="row" ng-show="IsVizpodDetailShow">
      <div class="col-lg-12 col-xs-12 col-sm-12">
        <div class="portlet light bordered fullscreendashobard">
          <div class="portlet-title">
            <div class="caption">
              <i class=" icon-layers "></i>
              <span class="caption-subject bold">{{VizpodDetail.name}}</span>
            </div>
            <div class="actions">
              <a  ng-click="downloadFile({uuid:VizpodDetail.vizpodInfo.uuid,version:VizpodDetail.vizpodInfo.version})" class="btn btn-circle btn-icon-only btn-default fa  fa-download" ng-click="backVizpodSummary()" tooltip-placement="{{showtooltip}}" uib-tooltip="Download" ng-show="hideIcon">
              </a>
              <a class="btn btn-circle btn-icon-only btn-default" ng-click="backVizpodSummary()" tooltip-placement="{{showtooltip}}" uib-tooltip="Back" ng-show="hideIcon">
                  <i class="fa fa-time" aria-hidden="true"></i>
              </a>
            </div>
          </div><!--End portlet-title-->
          <div class="portlet-body" style="margin-bottom:-15px;">
            <div class="row" ng-show="!inprogressdatavizpodetail && !isDataErrorvizpodetail">
              <div class="col-md-6 col-sm-6">
                <div class="dataTables_length" id="sample_1_length">
                  <label>Show
                    <select name="sample_1_length" aria-controls="sample_1" class="form-control input-sm input-xsmall input-inline" ng-model="pagination.pageSize" ng-options="r for r in pagination.paginationPageSizes" ng-change="onPerPageChange()">
                    </select>
                  </label>
                </div>
              </div>
                <div class="col-md-6 col-sm-6">
                  <div style="float:right;">
                    <label>Search:</label>
                    <input type="search" class="form-control input-sm input-small input-inline" ng-change="filterSearchVizpodDetail(searchtext)" ng-model="searchtext">
                  </div>
                </div>
                <div class="col-md-12 col-sm-12">
                  <div ui-grid="gridOptions"  ui-grid-resize-columns ui-grid-auto-resize ui-grid-exporter class="grid" ng-style="getGridStyleDetail()">
                    <div class="nodatawatermark_results" ng-show="!gridOptions.data.length">No data available</div>
                  </div>
                  <div class="row">
                    <div class="col-md-6" style="margin-top:17px">
                      Showing {{pagination.to}} to {{pagination.from}} of {{pagination.totalItems}} records
                    </div>
                    <div class="col-md-6">
                      <ul uib-pagination items-per-page="pagination.pageSize" total-items="pagination.totalItems" ng-model="pagination.currentPage" ng-change="pageChanged()" style="float:right;overflow:hidden;z-index:1;" max-size="pagination.maxSize" class="pagination-md"  boundary-links="true" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></ul>
                    </div>
                  </div>
                </div>
              </div>
              <div class="spinner centercontent" ng-show="inprogressdatavizpodetail">
                <div class="bounce1"></div>
                <div class="bounce2"></div>
                <div class="bounce3"></div>
              </div>
              <div ng-show="isDataErrorvizpodetail">
                <h3 style="font-size:14px;color:red;">Some Error Occurred</h3>
              </div>
          </div>
        </div>
      </div>
    </div>

    <div id="downloadSample" class="modal fade bs-modal-lg in" style="display: none;">
      <div class="modal-dialog" style="width:40%">
        <div class="modal-content" style="resize: both;overflow: auto;">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
            <h4 class="modal-title">Download Param</h4>
          </div>
          <form class="form-horizontal" name="myform3" ng-submit="submitDownload()" novalidate="novalidate">
            <div class="modal-body" style="padding-top:0px">
              <div class="slimScrollDiv" style="position: relative; overflow-y: auto !important; width:auto;padding:10px;">
                <div class="scroller" style="max-height:150px;min-height:110px; overflow-y: auto !important; width: auto;margin-top:30px"
                  data-always-visible="1" data-rail-visible1="1" data-initialized="1">
                  <div class="row">
                    <div class="col-md-12">
                      <div class="form-group">
                        <label class="col-md-3 control-label">Rows</label>
                        <div class="col-md-8">
                          <input type="number" limit-to="{{download.limit_to}}" min="1" class="form-control" ng-model="download.rows" max="{{download.maxrow}}"
                            required>
                        </div>
                      </div>
                      <div class="form-group">
                        <label class="col-md-3 control-label">Formate</label>
                        <div class="col-md-8">
                          <select class="form-control" data-ng-model="download.selectFormate" ng-options="r for r in download.formates" required>
                          </select>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!--End Model Body-->
            <div class="modal-footer">
              <button type="button" data-dismiss="modal" class="btn dark btn-outline">Close</button>
              <button type="submit" class="btn green">Submit</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>  

